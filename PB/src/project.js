require=function i(c,l,s){function r(e,t){if(!l[e]){if(!c[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var a=l[e]={exports:{}};c[e][0].call(a.exports,function(t){return r(c[e][1][t]||t)},a,a.exports,i,c,l,s)}return l[e].exports}for(var h="function"==typeof require&&require,t=0;t<s.length;t++)r(s[t]);return r}({ball:[function(t,e,o){"use strict";cc._RF.push(e,"0cae2D2WHxMqrBHo6otoORe","ball"),cc.Class({extends:cc.Component,properties:{game:{default:null,type:cc.Component}},onBeginContact:function(t,e,o){if(this.game=cc.find("Canvas").getComponent("game"),100==o.tag){if(99==e.tag){this.he=!0,e.tag=98;var n=this.game.group.shift();this.game.comb[n].add(e.node),e.tag=n,this.game.tball||this.game.createBall(),cc.find("Canvas").on("touchend",this.game.shootBall,this.game)}e.body.linearVelocity={x:0,y:0}}if(0<=o.tag&&o.tag<98&&e.node.y<o.node.y){if(e.body.linearVelocity={x:0,y:0},o.body.linearVelocity={x:0,y:0},this.game.tball||this.game.createBall(),cc.find("Canvas").on("touchend",this.game.shootBall,this.game),e.node.tag==o.node.tag||7==e.node.tag||7==o.node.tag)cc.log("same"),this.game.comb[o.tag].add(e.node),e.tag=o.tag;else{cc.log("normal");var a=this.game.group.shift();this.game.comb[a].add(e.node),e.tag=a}for(var i=0;i<this.game.comb.length;i++)3<=this.game.comb[i].size&&(cc.log("boom"),this.game.getPoint(),this.game.wallAction(),this.game.comb[i].forEach(function(t){t.getComponent(cc.RigidBody).linearVelocity={x:0,y:0},t.removeComponent(cc.PhysicsCircleCollider),t.getComponent(cc.RigidBody).gravityScale=1.5,t.getComponent(cc.RigidBody).linearVelocity={x:600*Math.random()-300,y:0}}),this.game.comb[i].clear(),this.game.group.unshift(i))}},onLoad:function(){},start:function(){},update:function(t){this.node&&this.node.y<=-cc.find("Canvas").height/2&&this.destroy()}}),cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","game"),cc.Class({extends:cc.Component,properties:{ball:{default:null,type:cc.Prefab},scoreboard:{default:null,type:cc.Node},gun:{default:null,type:cc.Node},wall:{default:null,type:cc.Node},load:{default:null,type:cc.Node},ballSpeed:Number,ballUrl:[],ballColor:[],balls:[],pool:null,comb:[],group:[],tball:null,score:Number,hitPointM:Object},toVec:function(t,e){return{x:e*Math.cos(t*Math.PI/180),y:e*Math.sin(t*Math.PI/180)}},toMag:function(t,e){var o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return{arc:180*Math.atan2(e,t)/Math.PI,len:o}},createBall:function(){cc.log("create");var t=cc.instantiate(this.ball),e=3+Math.round(Math.random()*(this.ballColor.length-4));t.getComponent(cc.Sprite).spriteFrame=this.ballColor[e],t.tag=e,t.x=this.gun.x,t.y=this.gun.y,t.getComponent(cc.RigidBody).enabledContactListener=!0,this.node.addChild(t),this.balls.push(t),this.tball=t},shootBall:function(t){this.balls[this.balls.length-1].getComponent(cc.RigidBody).linearVelocity=this.toVec(this.hitPointM.arc,this.ballSpeed),this.node.off("touchend",this.shootBall,this),this.tball=null},turnGun:function(t){this.hitPointM=this.toMag(this.gun.convertTouchToNodeSpace(t).x,this.gun.convertTouchToNodeSpace(t).y);var e=this.gun.getChildByName("top");this.hitPointM.arc<30&&-90<this.hitPointM.arc?this.hitPointM.arc=30:(this.hitPointM.arc<-90||150<this.hitPointM.arc)&&(this.hitPointM.arc=150),e.rotation=90-this.hitPointM.arc},getPoint:function(){this.score+=10,this.scoreboard.getComponent(cc.Label).string="Score:"+this.score},wallAction:function(){this.wall.getComponent(cc.RigidBody).linearVelocity={x:0,y:100},this.balls.map(function(t,e){t.getComponent(cc.RigidBody).linearVelocity={x:0,y:100}}),this.tball.getComponent(cc.RigidBody).linearVelocity={x:0,y:0},cc.log("wall up")},onLoad:function(){var n=this,a=this,t=cc.director.getPhysicsManager();cc.PhysicsManager.DrawBits;t.enabled=!0,this.balls=[],this.pool=new cc.NodePool,this.comb=[],this.group=[];for(var e=0;e<100;e++)this.group.push(e),this.comb[e]=new Set;this.scoreboard.zIndex=10,this.load.zIndex=10,this.score=0,this.ballUrl=["Texture/red","Texture/blue","Texture/green","Texture/yellow","Texture/pink","Texture/black","Texture/white","Texture/color"],a.ballUrl.map(function(t,o){cc.loader.loadRes(t,cc.SpriteFrame,function(t,e){t?cc.log(t):a.ballColor.push(e),o==n.ballUrl.length-1&&(cc.log("loaded"),a.load.active=!1,a.node.on("touchend",a.shootBall,a),n.createBall())})}),this.gun.setLocalZOrder(5),this.node.on("touchstart",this.turnGun,this),this.node.on("touchmove",this.turnGun,this)},update:function(t){}}),cc._RF.pop()},{}],wall:[function(t,e,o){"use strict";cc._RF.push(e,"80457tLF6xFEY8YNeqMpPA3","wall"),cc.Class({extends:cc.Component,properties:{game:{default:null,type:cc.Component}},onBeginContact:function(t,e,o){cc.log("gameover"),120==o.tag&&(this.game.wall.getComponent(cc.RigidBody).gravityScale=0,this.game.wall.getComponent(cc.RigidBody).linearVelocity={x:0,y:0},this.game.load.getComponent(cc.Label).string="Game Over",this.game.load.active=!0,cc.find("Canvas").on("touchend",function(){cc.director.loadScene("game")},this.game))},onLoad:function(){this.game=cc.find("Canvas").getComponent("game")},start:function(){}}),cc._RF.pop()},{}]},{},["ball","game","wall"]);